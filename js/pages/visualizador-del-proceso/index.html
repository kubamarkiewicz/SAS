
<!-- popup alerts -->
<section class="popup-alerts">
	<div class="alert" ng-repeat="item in popupAlertsData">
		<h3>{{ item.Title }}</h3>
		<main>{{ item.Message }}</main>
	</div>
</section>


<!-- zoom controls -->
<div class="zoom-controls">
	<md-button ng-click="zoomIn()">&#43;</md-button>
	<md-button class="md-raised md-primary zoom-out" ng-click="zoomOut()">&#8722;</md-button>
</div>


<!-- AGV popup -->
<div id="agv-popup" class="popup" md-theme="dark">
	<h3>AGV {{ selectedAGV.Id }}</h3>
	<p>Estado: {{ selectedAGV.Status }}</p>
</div>

<!-- semaphore popup -->
<div id="semaphore-popup" class="popup" md-theme="dark">
	<h3>Semaphore {{ selectedSemaphore.Id }}</h3>
	<p>Estado: {{ selectedSemaphore.State }}</p>
	<p class="clickable" ng-click="updateSemaphore(selectedSemaphore.Id)">Paro</p>
	<p class="clickable" ng-click="updateSemaphore(selectedSemaphore.Id)">Marcha</p>
	<p class="clickable" ng-click="updateSemaphore(selectedSemaphore.Id)">Rearme</p>
</div>

<!-- transport belt popup -->
<div id="transport-belt-popup" class="popup" md-theme="dark">
	<h3>Cinta transportadora {{ selectedTransportBelt.Id }}</h3>
	<p>Estado: {{ selectedTransportBelt.State }}</p>
	<p class="clickable" ng-click="updateTransportBelt(selectedTransportBelt.Id)">Paro</p>
	<p class="clickable" ng-click="updateTransportBelt(selectedTransportBelt.Id)">Marcha</p>
	<p class="clickable" ng-click="updateTransportBelt(selectedTransportBelt.Id)">Rearme</p>
</div>

<!-- storage position popup -->
<div id="position-popup" class="popup" md-theme="dark">
	<h3>POSICIÃ“N {{ selectedPosition.Id }}</h3>
	<p ng-show="!storagePositionNichesData.length" layout="row" layout-align="center">
		<md-progress-circular md-diameter="20px"></md-progress-circular>
	</p>
	<p ng-repeat="niche in storagePositionNichesData">
		Nicho {{ niche.Id }}<br>
		{{ niche.product ? 'Producto ' + niche.product : '-' }}
	</p>
</div>



<div id="mapa" ng-click="mapClick($event)">
	
	<!-- AGVs -->
	<div 
		ng-repeat="agv in AGVData"  
		id="agv-{{ agv.Id }}"
		class="agv" 
		style="transform: translate({{ metersToPxX(agv.X) }}px, {{ metersToPxY(agv.Y) }}px) rotate({{ agv.Orientation }}deg)"
		ng-click="openAGVPopup($event, agv)">
		{{ agv.Id }}
	</div>
	
	<!-- semaphores -->
	<div 
		ng-repeat="semaphore in semaphoresData"  
		id="semaphore-{{ semaphore.Id }}"
		class="semaphore" 
		style="transform: translate({{ metersToPxX(semaphoresCoordinates[semaphore.Id].x) }}px, {{ metersToPxX(semaphoresCoordinates[semaphore.Id].y) }}px)"
		ng-click="openSemaphorePopup($event, semaphore)">
	</div>
	
	<!-- transport belts -->
	<div 
		ng-repeat="transportBelt in transportBeltsData"  
		id="transport-belt-{{ transportBelt.Id }}"
		class="transport-belt" 
		style="transform: translate({{ metersToPxX(transportBeltsCoordinates[transportBelt.Id].x) }}px, {{ metersToPxY(transportBeltsCoordinates[transportBelt.Id].y) }}px)"
		ng-click="openTransportBeltPopup($event, transportBelt)">
		CT{{ transportBelt.Id }}
	</div>

	<!-- storage positions -->
	<div 
		ng-repeat="(id, position) in storagePositionsCoordinates"  
		id="position-{{ id }}"
		class="position" 
		style="transform: translate({{ metersToPxX(position.x) }}px, {{ metersToPxY(position.y) }}px)"
		ng-click="openPositionPopup($event, position)">
	</div>

	<!-- map images -->
	<img src="images/map/AGV PSA Vigo_ESTIRADO_v5.svg" alt="">

</div> 
